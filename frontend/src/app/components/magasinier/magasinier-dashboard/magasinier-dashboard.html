<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="container">
      <div class="header-content">
        <div class="header-left">
          <h1>ğŸ“¦ Espace Magasinier</h1>
          <p>Gestion des stocks et commandes</p>
        </div>
        <div class="header-right">
          <div class="user-info">
            <span>Bienvenue, <strong>{{ currentUser?.firstName }} {{ currentUser?.lastName }}</strong></span>
            <button (click)="logout()" class="btn btn-outline">DÃ©connexion</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="dashboard-main">
    <div class="container">
      <!-- Indicateur de chargement SIMPLE -->
      <div *ngIf="isLoading" style="text-align: center; padding: 3rem;">
        <div style="border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto;"></div>
        <p>Chargement en cours...</p>
        <p><small>Veuillez patienter</small></p>
      </div>

      <!-- Contenu QUAND chargÃ© -->
      <div *ngIf="!isLoading">
        <!-- Message d'erreur -->
        <div *ngIf="errorMessage" style="background: #f8d7da; color: #721c24; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
          âš ï¸ {{ errorMessage }}
        </div>

        <!-- Statistiques -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 2rem 0;">
          <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <div style="font-size: 2rem;">âš ï¸</div>
            <h3 style="margin: 0.5rem 0;">Stocks Faibles</h3>
            <p style="font-size: 2rem; font-weight: bold; margin: 0.5rem 0;">{{ stats.lowStock }}</p>
            <p style="color: #666; margin: 0;">Produits Ã  rÃ©approvisionner</p>
          </div>

          <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <div style="font-size: 2rem;">ğŸ“‹</div>
            <h3 style="margin: 0.5rem 0;">Commandes en Attente</h3>
            <p style="font-size: 2rem; font-weight: bold; margin: 0.5rem 0;">{{ stats.pendingOrders }}</p>
            <p style="color: #666; margin: 0;">Ã€ traiter</p>
          </div>

          <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <div style="font-size: 2rem;">ğŸ“¦</div>
            <h3 style="margin: 0.5rem 0;">Produits en Stock</h3>
            <p style="font-size: 2rem; font-weight: bold; margin: 0.5rem 0;">{{ stats.totalProducts }}</p>
            <p style="color: #666; margin: 0;">Total disponible</p>
          </div>

          <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <div style="font-size: 2rem;">ğŸ“…</div>
            <h3 style="margin: 0.5rem 0;">Commandes Aujourd'hui</h3>
            <p style="font-size: 2rem; font-weight: bold; margin: 0.5rem 0;">{{ stats.todayOrders }}</p>
            <p style="color: #666; margin: 0;">Ã€ prÃ©parer</p>
            <small>ğŸ“Œ {{ todayDate | date:'dd/MM/yyyy' }}</small>
          </div>
        </div>

        <!-- Actions -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin: 2rem 0;">
          <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); cursor: pointer;" (click)="manageInventory()">
            <div style="font-size: 2rem;">ğŸ“¦</div>
            <h4 style="margin: 0.5rem 0;">Gestion des Stocks</h4>
            <p style="color: #666;">VÃ©rifier et mettre Ã  jour les niveaux de stock</p>
            <div *ngIf="stats.lowStock > 0" style="background: #ffeaa7; color: #d35400; padding: 0.25rem 0.75rem; border-radius: 20px; display: inline-block; margin: 0.5rem 0;">
              {{ stats.lowStock }} stock(s) faible(s)
            </div>
            <br>
            <button style="background: #3498db; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 6px; margin-top: 1rem; cursor: pointer;">
              GÃ©rer les stocks
            </button>
          </div>

          <div style="background: white; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); cursor: pointer;" (click)="processOrders()">
            <div style="font-size: 2rem;">ğŸšš</div>
            <h4 style="margin: 0.5rem 0;">Commandes Clients</h4>
            <p style="color: #666;">Traiter et prÃ©parer les commandes clients</p>
            <div *ngIf="stats.pendingOrders > 0" style="background: #a29bfe; color: white; padding: 0.25rem 0.75rem; border-radius: 20px; display: inline-block; margin: 0.5rem 0;">
              {{ stats.pendingOrders }} en attente
            </div>
            <br>
            <button style="background: #3498db; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 6px; margin-top: 1rem; cursor: pointer;">
              Voir les commandes
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

