<div class="catalog-page">
  <h1>Notre Catalogue Électronique</h1>

  <!-- Recherche avancée -->
  <app-search-box
      placeholder="Rechercher un produit électronique..."
      [showFilters]="true"
      [showPriceFilter]="true"
      (searchChange)="onSearch($any($event))"
      (filtersChange)="onFiltersChange($any($event))"
  ></app-search-box>

  <!-- Liste des produits -->
  <div class="products-grid">
    <div 
      *ngFor="let product of filteredProducts" 
      class="product-card"
      [class.out-of-stock]="product.stock === 0"
    >

      <img 
  *ngIf="product.imageUrl"
  [src]="product.imageUrl"
  alt="{{ product.name }}"
  class="product-image"
/>


      <h3>{{ product.name }}</h3>

      <p class="description">{{ product.description }}</p>

      <p class="category">
        Catégorie : {{ getCategoryDisplayName(product.category) }}
      </p>

      <p class="price">{{ formatPrice(product.price) }}</p>

      <p class="stock" [class.low-stock]="product.stock > 0 && product.stock < 10">
        Stock : {{ product.stock }}
      </p>

      <p class="status" [class]="'status-' + (product.status || 'unknown')">
        {{ getStatusText(product.status || '') }}
      </p>

      <button 
        class="add-to-cart-btn" 
        [disabled]="product.stock === 0"
        (click)="addToCart(product)"
      >
        {{ product.stock === 0 ? 'Rupture' : 'Ajouter au panier' }}
      </button>
    </div>
  </div>

  <!-- Aucun résultat -->
  <div *ngIf="filteredProducts.length === 0" class="no-results">
    <p>Aucun produit trouvé pour votre recherche.</p>
    <button (click)="loadProducts()" class="reset-btn">Afficher tous les produits</button>
  </div>
</div>
